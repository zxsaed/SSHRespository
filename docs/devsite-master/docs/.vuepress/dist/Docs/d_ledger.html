<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Design document of ledger module | NULS</title>
    <meta name="description" content="Make Blockchain Easy">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.3751d6d5.css" as="style"><link rel="preload" href="/assets/js/app.a4a6b4ef.js" as="script"><link rel="preload" href="/assets/js/23.616d3c50.js" as="script"><link rel="prefetch" href="/assets/js/10.3ea2f924.js"><link rel="prefetch" href="/assets/js/100.b0d2e6e1.js"><link rel="prefetch" href="/assets/js/101.c29fd1db.js"><link rel="prefetch" href="/assets/js/102.965089aa.js"><link rel="prefetch" href="/assets/js/103.43d448e7.js"><link rel="prefetch" href="/assets/js/104.a36ae702.js"><link rel="prefetch" href="/assets/js/105.e5f3687e.js"><link rel="prefetch" href="/assets/js/106.6152cabe.js"><link rel="prefetch" href="/assets/js/107.c912b812.js"><link rel="prefetch" href="/assets/js/108.49eac8c6.js"><link rel="prefetch" href="/assets/js/109.991284de.js"><link rel="prefetch" href="/assets/js/11.7d5c1b1b.js"><link rel="prefetch" href="/assets/js/110.b73a6ba7.js"><link rel="prefetch" href="/assets/js/111.548dfc10.js"><link rel="prefetch" href="/assets/js/112.33bcfaca.js"><link rel="prefetch" href="/assets/js/113.f0d3dd58.js"><link rel="prefetch" href="/assets/js/114.54eb8651.js"><link rel="prefetch" href="/assets/js/12.f9774295.js"><link rel="prefetch" href="/assets/js/13.0f0d3c58.js"><link rel="prefetch" href="/assets/js/14.217ef102.js"><link rel="prefetch" href="/assets/js/15.de42a949.js"><link rel="prefetch" href="/assets/js/16.0245ef41.js"><link rel="prefetch" href="/assets/js/17.309c8aa9.js"><link rel="prefetch" href="/assets/js/18.fc983526.js"><link rel="prefetch" href="/assets/js/19.d78ff56b.js"><link rel="prefetch" href="/assets/js/2.9dd26b6d.js"><link rel="prefetch" href="/assets/js/20.5b11eead.js"><link rel="prefetch" href="/assets/js/21.e2d544ac.js"><link rel="prefetch" href="/assets/js/22.ceef42f1.js"><link rel="prefetch" href="/assets/js/24.de2bb2dd.js"><link rel="prefetch" href="/assets/js/25.36b3218d.js"><link rel="prefetch" href="/assets/js/26.9ac5ee86.js"><link rel="prefetch" href="/assets/js/27.b1ceb8ad.js"><link rel="prefetch" href="/assets/js/28.7cd871f9.js"><link rel="prefetch" href="/assets/js/29.6e965cbd.js"><link rel="prefetch" href="/assets/js/3.395c456b.js"><link rel="prefetch" href="/assets/js/30.eb23cb11.js"><link rel="prefetch" href="/assets/js/31.de4a5865.js"><link rel="prefetch" href="/assets/js/32.2a0ad569.js"><link rel="prefetch" href="/assets/js/33.21baaf4d.js"><link rel="prefetch" href="/assets/js/34.6ac9dc18.js"><link rel="prefetch" href="/assets/js/35.b382beac.js"><link rel="prefetch" href="/assets/js/36.c48ad34e.js"><link rel="prefetch" href="/assets/js/37.d4edbd76.js"><link rel="prefetch" href="/assets/js/38.0e79c874.js"><link rel="prefetch" href="/assets/js/39.e9998a32.js"><link rel="prefetch" href="/assets/js/4.ed61587d.js"><link rel="prefetch" href="/assets/js/40.0222e59f.js"><link rel="prefetch" href="/assets/js/41.31e68660.js"><link rel="prefetch" href="/assets/js/42.a22038be.js"><link rel="prefetch" href="/assets/js/43.3e9b2960.js"><link rel="prefetch" href="/assets/js/44.5c440bb1.js"><link rel="prefetch" href="/assets/js/45.a4986bde.js"><link rel="prefetch" href="/assets/js/46.233d107a.js"><link rel="prefetch" href="/assets/js/47.280686d1.js"><link rel="prefetch" href="/assets/js/48.5ba47782.js"><link rel="prefetch" href="/assets/js/49.31793a8c.js"><link rel="prefetch" href="/assets/js/5.f8a6f45b.js"><link rel="prefetch" href="/assets/js/50.57720b1f.js"><link rel="prefetch" href="/assets/js/51.eb045fb3.js"><link rel="prefetch" href="/assets/js/52.8601825a.js"><link rel="prefetch" href="/assets/js/53.48d2f9a7.js"><link rel="prefetch" href="/assets/js/54.155919db.js"><link rel="prefetch" href="/assets/js/55.d4e980a1.js"><link rel="prefetch" href="/assets/js/56.b222e3e0.js"><link rel="prefetch" href="/assets/js/57.0349f0b2.js"><link rel="prefetch" href="/assets/js/58.bc8d108f.js"><link rel="prefetch" href="/assets/js/59.8000bd88.js"><link rel="prefetch" href="/assets/js/6.5bdd1924.js"><link rel="prefetch" href="/assets/js/60.675211d5.js"><link rel="prefetch" href="/assets/js/61.aca9af94.js"><link rel="prefetch" href="/assets/js/62.e633bd6d.js"><link rel="prefetch" href="/assets/js/63.15a9ba5e.js"><link rel="prefetch" href="/assets/js/64.dd95ec59.js"><link rel="prefetch" href="/assets/js/65.238fe604.js"><link rel="prefetch" href="/assets/js/66.46910d10.js"><link rel="prefetch" href="/assets/js/67.84165c1f.js"><link rel="prefetch" href="/assets/js/68.a44d4a8f.js"><link rel="prefetch" href="/assets/js/69.bb67ac82.js"><link rel="prefetch" href="/assets/js/7.7d97e89c.js"><link rel="prefetch" href="/assets/js/70.e86144c1.js"><link rel="prefetch" href="/assets/js/71.e33eadba.js"><link rel="prefetch" href="/assets/js/72.3d129f8e.js"><link rel="prefetch" href="/assets/js/73.0676b7d4.js"><link rel="prefetch" href="/assets/js/74.04139eb3.js"><link rel="prefetch" href="/assets/js/75.d44eb65d.js"><link rel="prefetch" href="/assets/js/76.41aa5560.js"><link rel="prefetch" href="/assets/js/77.3e79a6ac.js"><link rel="prefetch" href="/assets/js/78.82fdc036.js"><link rel="prefetch" href="/assets/js/79.40c01994.js"><link rel="prefetch" href="/assets/js/8.8f417e91.js"><link rel="prefetch" href="/assets/js/80.115a54bb.js"><link rel="prefetch" href="/assets/js/81.1c715911.js"><link rel="prefetch" href="/assets/js/82.7aac4fa9.js"><link rel="prefetch" href="/assets/js/83.d6b4173d.js"><link rel="prefetch" href="/assets/js/84.26e59764.js"><link rel="prefetch" href="/assets/js/85.396c6d65.js"><link rel="prefetch" href="/assets/js/86.cb6d4a50.js"><link rel="prefetch" href="/assets/js/87.d629ff60.js"><link rel="prefetch" href="/assets/js/88.a416d06f.js"><link rel="prefetch" href="/assets/js/89.f8cd0168.js"><link rel="prefetch" href="/assets/js/9.3d3509ff.js"><link rel="prefetch" href="/assets/js/90.bc4c0ce8.js"><link rel="prefetch" href="/assets/js/91.6ce86fbf.js"><link rel="prefetch" href="/assets/js/92.e207a6c1.js"><link rel="prefetch" href="/assets/js/93.2150fe7c.js"><link rel="prefetch" href="/assets/js/94.c0d34093.js"><link rel="prefetch" href="/assets/js/95.78b9f936.js"><link rel="prefetch" href="/assets/js/96.7f2c10ee.js"><link rel="prefetch" href="/assets/js/97.e0a9b027.js"><link rel="prefetch" href="/assets/js/98.03166ee8.js"><link rel="prefetch" href="/assets/js/99.981a0879.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3751d6d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NULS</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/Docs/" class="nav-link router-link-active">Develop</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Docs/d_ledger.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh/Docs/d_ledger.html" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/nuls-io/devsite/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/Docs/" class="nav-link router-link-active">Develop</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Docs/d_ledger.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh/Docs/d_ledger.html" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/nuls-io/devsite/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Module Design</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Docs/d_network.html" class="sidebar-link">Network module design document</a></li><li><a href="/Docs/d_ledger.html" class="active sidebar-link">Design document of ledger module</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#overall-description" class="sidebar-link">Overall description</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#_1-1-module-overview" class="sidebar-link">1.1 Module Overview</a></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#_1-2-architecture" class="sidebar-link">1.2 Architecture</a></li></ul></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#functional-design" class="sidebar-link">Functional design</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#_2-1-functional-architecture" class="sidebar-link">2.1 Functional Architecture</a></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#_2-2-module-service" class="sidebar-link">2.2 Module Service</a></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#_2-3-module-internal-function" class="sidebar-link">2.3 Module internal function</a></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#_2-4-bookkeeping-process" class="sidebar-link">2.4 Bookkeeping Process</a></li></ul></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#interface-design" class="sidebar-link">Interface Design</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#_3-1-module-core-interaction-interface" class="sidebar-link">3.1 Module core interaction interface</a></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#_3-2-other-interfaces" class="sidebar-link">3.2 Other interfaces</a></li></ul></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#description-of-the-event" class="sidebar-link">Description of the event</a></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#agreement" class="sidebar-link">Agreement</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#_5-1-network-communication-protocol" class="sidebar-link">5.1 Network Communication Protocol</a></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#_5-2-trading-agreement" class="sidebar-link">5.2 Trading Agreement</a></li></ul></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#module-configuration" class="sidebar-link">Module Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#_6-1-configuration-instructions" class="sidebar-link">6.1 Configuration Instructions</a></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#_6-2-module-dependencies" class="sidebar-link">6.2 Module Dependencies</a></li></ul></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#java-specific-design" class="sidebar-link">Java-specific design</a></li><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#supplementary-content" class="sidebar-link">Supplementary content</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Docs/d_ledger.html#references-literature" class="sidebar-link">References Literature</a></li></ul></li></ul></li><li><a href="/Docs/d_chain_manager.html" class="sidebar-link">Chain Management Module Design Document</a></li><li><a href="/Docs/d_account.html" class="sidebar-link">Account Module Design Document</a></li><li><a href="/Docs/d_smart_contract.html" class="sidebar-link">Smart contract module design</a></li><li><a href="/Docs/d_transaction.html" class="sidebar-link">Transaction management module Design document</a></li><li><a href="/Docs/d_cross_chain.html" class="sidebar-link">Overall description</a></li><li><a href="/Docs/d_consensus.html" class="sidebar-link">Consensus Module Design Document</a></li><li><a href="/Docs/d_public_service.html" class="sidebar-link">Public-Service Module Design Document</a></li><li><a href="/Docs/d_block.html" class="sidebar-link">Block Management Module Design Document</a></li><li><a href="/Docs/d_protocol_update.html" class="sidebar-link">Upgrade module design document</a></li><li><a href="/Docs/d_address.html" class="sidebar-link">NULS Protocol Address</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Interface</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Docs/i_rpc_protocol.html" class="sidebar-link">NULS Application Interface Services</a></li><li><a href="/Docs/i_public_service.html" class="sidebar-link">Public Service</a></li><li><a href="/Docs/i_nuls-api_JSONRPC.html" class="sidebar-link">API-JSONRPC</a></li><li><a href="/Docs/i_nuls-api_RESTFUL.html" class="sidebar-link">API-RESTFUL</a></li><li><a href="/Docs/i_account.html" class="sidebar-link">Account Module</a></li><li><a href="/Docs/i_chain-manager.html" class="sidebar-link">Why should I have the Chain Management module?</a></li><li><a href="/Docs/i_cross-chain.html" class="sidebar-link">Interface List</a></li><li><a href="/Docs/i_network.html" class="sidebar-link">Why should I have &quot;Network Module&quot;?</a></li><li><a href="/Docs/i_block.html" class="sidebar-link">Block Module</a></li><li><a href="/Docs/i_transaction.html" class="sidebar-link">Transaction module</a></li><li><a href="/Docs/i_consensus.html" class="sidebar-link">poc Consensus Module</a></li><li><a href="/Docs/i_smart-contract.html" class="sidebar-link">Smart contract module</a></li><li><a href="/Docs/i_ledger.html" class="sidebar-link">Ledger Module</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>ChainBox</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Docs/c_chain_box.html" class="sidebar-link">NULS ChainBox</a></li><li><a href="/Docs/c_module.html" class="sidebar-link">Develope Module</a></li><li><a href="/Docs/c_message_module.html" class="sidebar-link">Encrypted Message Module Demo</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Smart Contract</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Docs/s_manual.html" class="sidebar-link">Development Manual</a></li><li><a href="/Docs/s_tools.html" class="sidebar-link">Development Tool</a></li><li><a href="/Docs/s_nrc20.html" class="sidebar-link">NRC-20</a></li><li><a href="/Docs/s_nrc721.html" class="sidebar-link">NRC-721</a></li><li><a href="/Docs/s_offline_assembly.html" class="sidebar-link">Smart contract offline assembly</a></li><li><a href="/Docs/s_advance.html" class="sidebar-link">Advanced Description</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="design-document-of-ledger-module"><a href="#design-document-of-ledger-module" aria-hidden="true" class="header-anchor">#</a> Design document of ledger module</h1> <h2 id="overall-description"><a href="#overall-description" aria-hidden="true" class="header-anchor">#</a> Overall description</h2> <h3 id="_1-1-module-overview"><a href="#_1-1-module-overview" aria-hidden="true" class="header-anchor">#</a> 1.1 Module Overview</h3> <h4 id="_1-1-1-why-do-you-have-a-book-module"><a href="#_1-1-1-why-do-you-have-a-book-module" aria-hidden="true" class="header-anchor">#</a> 1.1.1 Why do you have a &quot;book module&quot;?</h4> <blockquote><p>The ledger module is the data hub of the blockchain. The balances and transactions of all accounts are saved in the ledger module.
A network-wide account book is saved on each network node to ensure complete, open and transparent data, while ensuring that data cannot be tampered and traceable.</p></blockquote> <h4 id="_1-1-2-what-should-be-done-in-the-book-module"><a href="#_1-1-2-what-should-be-done-in-the-book-module" aria-hidden="true" class="header-anchor">#</a> 1.1.2 What should be done in the &quot;book module&quot;</h4> <blockquote><p>Provide data support for assembly transactions, mainly accounting and auditing, verify the legality of the transaction, such as: whether there is sufficient balance, whether to repeat payment (double flower)</p></blockquote> <h4 id="_1-1-3-positioning-of-the-book-module-in-the-system"><a href="#_1-1-3-positioning-of-the-book-module-in-the-system" aria-hidden="true" class="header-anchor">#</a> 1.1.3 Positioning of the &quot;book module&quot; in the system</h4> <blockquote><p>The ledger module is the data hub, which stores the result data of all existing transactions in the system. It does not depend on any business modules, and other modules depend on it as needed.</p></blockquote> <h4 id="_1-1-4-explanation-of-terms-in-book-module"><a href="#_1-1-4-explanation-of-terms-in-book-module" aria-hidden="true" class="header-anchor">#</a> 1.1.4 Explanation of terms in &quot;book module&quot;</h4> <ul><li>The random number of the transaction (nonce, a 32-bit hash value)
<ul><li>nonce: A scalar value equal to the number of transactions sent at this address, which will be included in every transaction initiated by the user.</li> <li>Each transaction in the account needs to save the nonce (hash) of the previous transaction</li> <li>Strictly speaking, a nonce is an attribute of the originating address (it only makes sense in the context of the sending address).However, the nonce is not explicitly stored in the blockchain as part of the account status.</li> <li>The nonce value is also used to prevent incorrect calculation of account balances.For example, suppose an account has 10 NULS balances and signs two transactions, all of which cost 6 NULS with nonce 1 and nonce 2, respectively.Which of these two transactions is valid? In a blockchain distributed system, nodes may receive transactions out of order.Nonce forces transactions of any address to be processed in order, regardless of the interval, regardless of the order in which the nodes receive.This way, all nodes will calculate the same balance.Payments for 6 Ethereum will be processed successfully and the account balance will be reduced to 4 ether.Whenever it is received, all nodes consider it invalid with a transaction with nonce 2.If a node receives a nonce 2 transaction first, it will hold it, but will not verify it until it receives and processes the nonce 1 transaction.</li> <li>Use nonce to ensure that all nodes calculate the same balance and sort the transactions correctly, which is equivalent to the mechanism used in Bitcoin to prevent &quot;double payment&quot;.However, because Ethereum tracks account balances and does not track individual coins separately (called UTXO in Bitcoin), &quot;double payments&quot; only occur when the account balance is incorrectly calculated.The nonce mechanism can prevent this from happening.</li></ul></li></ul> <h3 id="_1-2-architecture"><a href="#_1-2-architecture" aria-hidden="true" class="header-anchor">#</a> 1.2 Architecture</h3> <blockquote><p>The core of the books is asset management and bookkeeping management.</p></blockquote> <p><img src="/assets/img/ledger-arch.865ff93a.png" alt="ledger-arch.png"></p> <h2 id="functional-design"><a href="#functional-design" aria-hidden="true" class="header-anchor">#</a> Functional design</h2> <h3 id="_2-1-functional-architecture"><a href="#_2-1-functional-architecture" aria-hidden="true" class="header-anchor">#</a> 2.1 Functional Architecture</h3> <p><img src="/assets/img/ledger-functions.e4039436.png" alt="ledger-functions.png"></p> <h3 id="_2-2-module-service"><a href="#_2-2-module-service" aria-hidden="true" class="header-anchor">#</a> 2.2 Module Service</h3> <h4 id="_2-2-1-system-service-of-the-book-module"><a href="#_2-2-1-system-service-of-the-book-module" aria-hidden="true" class="header-anchor">#</a> 2.2.1 System Service of the Book Module</h4> <p><img src="/assets/img/ledger-service.219cab8a.png" alt="ledger-service.png"></p> <blockquote><p>The interface of rpc provided by the ledger module. For detailed interface, please refer to the interface design section.</p></blockquote> <h4 id="_2-2-2-modifying-system-operating-parameters"><a href="#_2-2-2-modifying-system-operating-parameters" aria-hidden="true" class="header-anchor">#</a> 2.2.2 Modifying system operating parameters</h4> <blockquote><p>Only rely on the core system, the core system can start, stop, modify parameters, etc. of the event module system,</p></blockquote> <h3 id="_2-3-module-internal-function"><a href="#_2-3-module-internal-function" aria-hidden="true" class="header-anchor">#</a> 2.3 Module internal function</h3> <h4 id="_2-3-1-hot-online-transaction-processing"><a href="#_2-3-1-hot-online-transaction-processing" aria-hidden="true" class="header-anchor">#</a> 2.3.1 Hot (online) transaction processing</h4> <blockquote><p>Module internal work mainly includes asset management, obtaining account address balance and nonce, and verifying transaction coinData.</p></blockquote> <ul><li>asset Management
<ul><li>Total assets of the account</li> <li>Available assets</li> <li>Freeze assets. For locked assets, separate record and locked asset information, including chain id, asset id, asset amount, lock time, lock height, etc.</li> <li>In the asset unlocking process, when the user's locked asset time or height reaches the unlocking condition, the account will unlock the asset information, accumulate the available balance, and delete the asset lock record of the local data.</li> <li>Multi-asset situation, need to join chainId.</li></ul></li> <li>Get account address balance and nonce
<ul><li>Get account address balance</li> <li>Get the account address nonce (the nonce is the last eight digits of a transaction hash value, meaning that the nonce of the first transaction is 0. Each future transaction of the account will contain the nonce value of the previous transaction)</li></ul></li> <li>Verify the transaction
<ul><li>Double flower verification (nonce mechanism prevents double payment)</li> <li>Transaction creator verification, verifying that the issuer of the transaction has sufficient balance to verify that the nonce of the transaction creator is legal</li> <li>Continuous transaction verification</li></ul></li> <li>Function Interface Management (rpc)
<ul><li>rpc interface for use by other modules</li></ul></li></ul> <h4 id="_2-3-2-cold-offline-transaction-processing"><a href="#_2-3-2-cold-offline-transaction-processing" aria-hidden="true" class="header-anchor">#</a> 2.3.2 Cold (offline) transaction processing</h4> <blockquote><p>A cold wallet is an unconnected wallet, also called an offline wallet.A hot wallet is a wallet that keeps online, that is, an online wallet.Cold wallets are not more secure than hot wallets.</p></blockquote> <blockquote><p>Since the cold wallet only signs the transaction information, the signed hex string is transmitted to the server through the hot wallet, and then the server performs unified transaction processing, so the client needs to perform the offline signature function.
The offline transaction system maintains the storage information of the nonce. After using a nonce, the nonce is saved in the business system.</p></blockquote> <blockquote><p>Most offline transactions are handled by the exchange itself, we need to store the account data of the entire network account</p></blockquote> <h3 id="_2-4-bookkeeping-process"><a href="#_2-4-bookkeeping-process" aria-hidden="true" class="header-anchor">#</a> 2.4 Bookkeeping Process</h3> <h4 id="_2-4-1-transfer-transaction-process"><a href="#_2-4-1-transfer-transaction-process" aria-hidden="true" class="header-anchor">#</a> 2.4.1 Transfer Transaction Process</h4> <ul><li>User enters the address of the transfer and the transferred address and the transferred amount</li> <li>The system signs the transfer information by the private key of the transferred address (used to prove that the transaction was actually initiated by me)</li> <li>The system verifies the transaction information
<ul><li>Balance verification</li> <li>Fee verification</li> <li>nonce continuity verification</li> <li>Signature and input account verification</li></ul></li> <li>Put this transaction into the local TxPool (that is, the account unconfirmed trading pool)</li> <li>Broadcast transaction information to other nodes</li> <li>Packing blocks, verifying blocks</li> <li>Confirm transaction
<ul><li>Update the balance of all accounts related to (transfer or transfer)</li> <li>Update the nonce corresponding to the account asset</li></ul></li></ul> <h4 id="_2-4-2-ordinary-transaction-process-reference-example"><a href="#_2-4-2-ordinary-transaction-process-reference-example" aria-hidden="true" class="header-anchor">#</a> 2.4.2 Ordinary transaction process (reference example)</h4> <p><img src="/assets/img/eth-transaction-flow.6f3dd253.png" alt="eth-transaction-flow.png"></p> <h4 id="_2-4-3-transaction-verification-process"><a href="#_2-4-3-transaction-verification-process" aria-hidden="true" class="header-anchor">#</a> 2.4.3 Transaction Verification Process</h4> <p><img src="/assets/img/trx-validate-flow.fd3d46e4.png" alt="trx-validate-flow.png"></p> <h2 id="interface-design"><a href="#interface-design" aria-hidden="true" class="header-anchor">#</a> Interface Design</h2> <h3 id="_3-1-module-core-interaction-interface"><a href="#_3-1-module-core-interaction-interface" aria-hidden="true" class="header-anchor">#</a> 3.1 Module core interaction interface</h3> <h4 id="_3-1-1-get-account-balance"><a href="#_3-1-1-get-account-balance" aria-hidden="true" class="header-anchor">#</a> 3.1.1 Get account balance</h4> <blockquote><p>cmd: getBalance</p></blockquote> <h5 id="parameter-description-request"><a href="#parameter-description-request" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required</th> <th style="text-align:right">Data Type</th> <th style="text-align:right">Description</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of interface call chain</td></tr> <tr><td>address</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">To find the address of the balance</td></tr> <tr><td>assetChainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Asset-initiated chain ID</td></tr> <tr><td>assetId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Asset ID</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   
    <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;0x407d73d8a49eeb85d32cf465507dd71d507100c1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetChainId&quot;</span><span class="token operator">:</span><span class="token number">34</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetId&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response"><a href="#return-value-description-response" aria-hidden="true" class="header-anchor">#</a> Return value description (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span> 
       <span class="token property">&quot;available&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000&quot;</span><span class="token punctuation">,</span>
       <span class="token property">&quot;freeze&quot;</span><span class="token operator">:</span> <span class="token string">&quot;200000000&quot;</span><span class="token punctuation">,</span>
       <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12000000000&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>Description: 1NULS=10^8Na</p></blockquote> <table><thead><tr><th>Field</th> <th style="text-align:center">Data Type</th> <th style="text-align:right">Description Information</th></tr></thead> <tbody><tr><td>available</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">Available balances</td></tr> <tr><td>freeze</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">Freeze balance</td></tr> <tr><td>total</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">Total Asset Balance total = available+freeze</td></tr></tbody></table> <h4 id="_3-1-2-get-the-current-account-nonce-value"><a href="#_3-1-2-get-the-current-account-nonce-value" aria-hidden="true" class="header-anchor">#</a> 3.1.2 Get the current account nonce value</h4> <blockquote><p>cmd: getNonce</p></blockquote> <h5 id="parameter-description-request-2"><a href="#parameter-description-request-2" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required</th> <th style="text-align:right">Data Type</th> <th style="text-align:right">Description</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of interface call chain</td></tr> <tr><td>address</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">To find the address of the balance</td></tr> <tr><td>assetChainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Asset-initiated chain ID</td></tr> <tr><td>assetId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Asset ID</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   
    <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;0x407d73d8a49eeb85d32cf465507dd71d507100c1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetChainId&quot;</span><span class="token operator">:</span><span class="token number">34</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetId&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-2"><a href="#return-value-description-response-2" aria-hidden="true" class="header-anchor">#</a> Return value description (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span><span class="token string">&quot;xxxxxxxxxxx&quot;</span>，
   <span class="token property">&quot;nonceType&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Data Type</th> <th style="text-align:right">Description Information</th></tr></thead> <tbody><tr><td>nonce</td> <td style="text-align:center">String</td> <td style="text-align:right">On the expense trading hash</td></tr> <tr><td>nonceType</td> <td style="text-align:center">int</td> <td style="text-align:right">1The transaction was confirmed, 0 the transaction was not confirmed</td></tr></tbody></table> <h4 id="_3-1-3-obtaining-the-balance-and-nonce-value"><a href="#_3-1-3-obtaining-the-balance-and-nonce-value" aria-hidden="true" class="header-anchor">#</a> 3.1.3 Obtaining the balance and nonce value</h4> <blockquote><p>cmd: getBalanceNonce</p></blockquote> <h5 id="parameter-description-request-3"><a href="#parameter-description-request-3" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required</th> <th style="text-align:right">Data Type</th> <th style="text-align:right">Description</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of interface call chain</td></tr> <tr><td>address</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">To find the address of the balance</td></tr> <tr><td>assetChainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Asset-initiated chain ID</td></tr> <tr><td>assetId</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Asset ID</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
   
    <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;0x407d73d8a49eeb85d32cf465507dd71d507100c1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetChainId&quot;</span><span class="token operator">:</span><span class="token string">&quot;34&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetId&quot;</span><span class="token operator">:</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-3"><a href="#return-value-description-response-3" aria-hidden="true" class="header-anchor">#</a> Return value description: (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;available&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Data Type</th> <th style="text-align:right">Description Information</th></tr></thead> <tbody><tr><td>available</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">User Available Balance</td></tr> <tr><td>nonce</td> <td style="text-align:center">String</td> <td style="text-align:right">The random value of the account, which holds the hash of the hash of the user's previous transaction.</td></tr> <tr><td>nonceType</td> <td style="text-align:center">int</td> <td style="text-align:right">1 :nonce taken from confirmed transaction, 0 :nonce taken from unconfirmed transaction</td></tr></tbody></table> <h4 id="_3-1-4-verifying-coindata"><a href="#_3-1-4-verifying-coindata" aria-hidden="true" class="header-anchor">#</a> 3.1.4 Verifying coinData</h4> <blockquote><p>cmd: verifyCoinData</p></blockquote> <h5 id="parameter-description-request-4"><a href="#parameter-description-request-4" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required</th> <th style="text-align:right">Data Type</th> <th style="text-align:right">Description</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain id of interface call chain</td></tr> <tr><td>txHex</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Trading hex stream</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">458</span><span class="token punctuation">,</span>
    <span class="token property">&quot;txHex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-4"><a href="#return-value-description-response-4" aria-hidden="true" class="header-anchor">#</a> Return value description: (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code>In the case of failure<span class="token punctuation">,</span> the fail error code is returned uniformly.
Successfully<span class="token operator">:</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;orphan&quot;</span><span class="token operator">:</span><span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Data Type</th> <th style="text-align:center">Description Information</th></tr></thead> <tbody><tr><td>Orphan</td> <td style="text-align:center">boolean</td> <td style="text-align:center">true orphan trading</td></tr></tbody></table> <h4 id="_3-1-5-batch-verification-notice"><a href="#_3-1-5-batch-verification-notice" aria-hidden="true" class="header-anchor">#</a> 3.1.5 Batch verification notice</h4> <blockquote><p>cmd: bathValidateBegin</p></blockquote> <h5 id="parameter-description-request-5"><a href="#parameter-description-request-5" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required</th> <th style="text-align:right">Data Type</th> <th style="text-align:right">Description</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain Id of Interface Call Chain</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
     <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-5"><a href="#return-value-description-response-5" aria-hidden="true" class="header-anchor">#</a> Return value description: (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Data Type</th> <th style="text-align:right">Description Information</th></tr></thead> <tbody><tr><td>value</td> <td style="text-align:center">int</td> <td style="text-align:right">1 successful, 0 failed</td></tr></tbody></table> <h4 id="_3-1-6-submitting-unconfirmed-transactions"><a href="#_3-1-6-submitting-unconfirmed-transactions" aria-hidden="true" class="header-anchor">#</a> 3.1.6 Submitting unconfirmed transactions</h4> <blockquote><p>cmd: commitUnconfirmedTx</p></blockquote> <h5 id="parameter-description-request-6"><a href="#parameter-description-request-6" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required</th> <th style="text-align:right">Data Type</th> <th style="text-align:right">Description</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain Id of Interface Call Chain</td></tr> <tr><td>txHex</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Trading hex stream</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
     <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
     <span class="token property">&quot;txHex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-6"><a href="#return-value-description-response-6" aria-hidden="true" class="header-anchor">#</a> Return value description: (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code>In the case of failure<span class="token punctuation">,</span> the fail error code is returned uniformly.

Successfully<span class="token operator">:</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;orphan&quot;</span><span class="token operator">:</span><span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Data Type</th> <th style="text-align:center">Description Information</th></tr></thead> <tbody><tr><td>Orphan</td> <td style="text-align:center">boolean</td> <td style="text-align:center">true for orphan trading</td></tr></tbody></table> <h4 id="_3-1-7-submitting-unconfirmed-transactions-in-bulk"><a href="#_3-1-7-submitting-unconfirmed-transactions-in-bulk" aria-hidden="true" class="header-anchor">#</a> 3.1.7 Submitting unconfirmed transactions in bulk</h4> <blockquote><p>cmd: commitBatchUnconfirmedTxs</p></blockquote> <h5 id="parameter-description-request-7"><a href="#parameter-description-request-7" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required</th> <th style="text-align:right">Data Type</th> <th style="text-align:right">Description</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain Id of Interface Call Chain</td></tr> <tr><td>txList</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Trading Hex Value List</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
     <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
     <span class="token property">&quot;txList&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[xxxxxxxx，yyyyyyyyy]&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-7"><a href="#return-value-description-response-7" aria-hidden="true" class="header-anchor">#</a> Return value description: (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;orphan&quot;</span><span class="token operator">:</span><span class="token string">&quot;[xxxxxxxx，yyyyyyyyy]&quot;</span>，
    <span class="token property">&quot;fail&quot;</span><span class="token operator">:</span><span class="token string">&quot;[aaaaaaaa，bbbbbbbbb]&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Data Type</th> <th style="text-align:center">Description Information</th></tr></thead> <tbody><tr><td>orphan</td> <td style="text-align:center">List&lt;String&gt;</td> <td style="text-align:center">Return to orphaned transaction list</td></tr> <tr><td>fail</td> <td style="text-align:center">List&lt;String&gt;</td> <td style="text-align:center">Return failed list</td></tr></tbody></table> <h4 id="_3-1-8-submitting-block-transactions"><a href="#_3-1-8-submitting-block-transactions" aria-hidden="true" class="header-anchor">#</a> 3.1.8 Submitting block transactions</h4> <blockquote><p>cmd: commitBlockTxs</p></blockquote> <h5 id="parameter-description-request-8"><a href="#parameter-description-request-8" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required</th> <th style="text-align:right">Data Type</th> <th style="text-align:right">Description</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain Id of Interface Call Chain</td></tr> <tr><td>txHexList</td> <td style="text-align:center">Y</td> <td style="text-align:right">array</td> <td style="text-align:right">Trading List Transactions hex stream</td></tr> <tr><td>blockHeight</td> <td style="text-align:center">Y</td> <td style="text-align:right">long</td> <td style="text-align:right">Block Height</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
     <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
     <span class="token property">&quot;txHex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[xxxxxxxx,yyyyyyyy]&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;blockHeight&quot;</span><span class="token operator">:</span> <span class="token number">25</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-8"><a href="#return-value-description-response-8" aria-hidden="true" class="header-anchor">#</a> Return value description: (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Data Type</th> <th style="text-align:right">Description Information</th></tr></thead> <tbody><tr><td>value</td> <td style="text-align:center">int</td> <td style="text-align:right">true success, false failure</td></tr></tbody></table> <h4 id="_3-1-9-rolling-back-unconfirmed-transactions"><a href="#_3-1-9-rolling-back-unconfirmed-transactions" aria-hidden="true" class="header-anchor">#</a> 3.1.9 Rolling back unconfirmed transactions</h4> <blockquote><p>cmd: rollBackUnconfirmTx</p></blockquote> <h5 id="parameter-description-request-9"><a href="#parameter-description-request-9" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required</th> <th style="text-align:right">Data Type</th> <th style="text-align:right">Description</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain Id of Interface Call Chain</td></tr> <tr><td>txHex</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Trading hex stream</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
     <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
     <span class="token property">&quot;txHex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-9"><a href="#return-value-description-response-9" aria-hidden="true" class="header-anchor">#</a> Return value description: (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Data Type</th> <th style="text-align:right">Description Information</th></tr></thead> <tbody><tr><td>value</td> <td style="text-align:center">int</td> <td style="text-align:right">1 successful, 0 failed</td></tr></tbody></table> <h4 id="_3-1-10-rollback-block-trading"><a href="#_3-1-10-rollback-block-trading" aria-hidden="true" class="header-anchor">#</a> 3.1.10 Rollback block trading</h4> <blockquote><p>cmd: rollBackBlockTxs</p></blockquote> <h5 id="parameter-description-request-10"><a href="#parameter-description-request-10" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required</th> <th style="text-align:right">Data Type</th> <th style="text-align:right">Description</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain Id of Interface Call Chain</td></tr> <tr><td>blockHeight</td> <td style="text-align:center">Y</td> <td style="text-align:right">long</td> <td style="text-align:right">Block Height</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
     <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
     <span class="token property">&quot;blockHeight&quot;</span><span class="token operator">:</span> <span class="token number">25</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-10"><a href="#return-value-description-response-10" aria-hidden="true" class="header-anchor">#</a> Return value description: (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Data Type</th> <th style="text-align:right">Description Information</th></tr></thead> <tbody><tr><td>value</td> <td style="text-align:center">int</td> <td style="text-align:right">1 successful, 0 failed</td></tr></tbody></table> <h4 id="_3-1-11-entire-block-check"><a href="#_3-1-11-entire-block-check" aria-hidden="true" class="header-anchor">#</a> 3.1.11 Entire block check</h4> <blockquote><p>cmd: blockValidate</p></blockquote> <h5 id="parameter-description-request-11"><a href="#parameter-description-request-11" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Required</th> <th style="text-align:right">Data Type</th> <th style="text-align:right">Description</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain Id of Interface Call Chain</td></tr> <tr><td>txList</td> <td style="text-align:center">Y</td> <td style="text-align:right">String</td> <td style="text-align:right">Trading Hex Value List</td></tr> <tr><td>blockHeight</td> <td style="text-align:center">Y</td> <td style="text-align:right">long</td> <td style="text-align:right">Block Height</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
     <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
     <span class="token property">&quot;txList&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[xxxxxxxx，yyyyyyyyy]&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;blockHeight&quot;</span><span class="token operator">:</span><span class="token number">20</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-11"><a href="#return-value-description-response-11" aria-hidden="true" class="header-anchor">#</a> Return value description: (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Data Type</th> <th style="text-align:center">Description Information</th></tr></thead> <tbody><tr><td>value</td> <td style="text-align:center">boolean</td> <td style="text-align:center">true success, false failure</td></tr></tbody></table> <h3 id="_3-2-other-interfaces"><a href="#_3-2-other-interfaces" aria-hidden="true" class="header-anchor">#</a> 3.2 Other interfaces</h3> <h4 id="_3-2-1-obtain-asset-information-based-on-asset-id"><a href="#_3-2-1-obtain-asset-information-based-on-asset-id" aria-hidden="true" class="header-anchor">#</a> 3.2.1 Obtain asset information based on asset id</h4> <blockquote><p>cmd: getAsset</p></blockquote> <h5 id="parameter-description-request-12"><a href="#parameter-description-request-12" aria-hidden="true" class="header-anchor">#</a> Parameter Description (request)</h5> <table><thead><tr><th>Field</th> <th style="text-align:center">Optional</th> <th style="text-align:right">Data Type</th> <th style="text-align:right">Description Information</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">The chain where the interface is called Id</td></tr> <tr><td>assetChainId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Chain ID of the asset origination chain</td></tr> <tr><td>assetId</td> <td style="text-align:center">Y</td> <td style="text-align:right">int</td> <td style="text-align:right">Asset ID</td></tr></tbody></table> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  <span class="token property">&quot;assetChainId&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
  <span class="token property">&quot;assetId&quot;</span><span class="token operator">:</span> <span class="token number">41</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="return-value-description-response-12"><a href="#return-value-description-response-12" aria-hidden="true" class="header-anchor">#</a> Return value description (response)</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;chainId&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetChainId&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    <span class="token property">&quot;assetId&quot;</span><span class="token operator">:</span> <span class="token number">41</span><span class="token punctuation">,</span>
    <span class="token property">&quot;balance&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;available&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;freeze&quot;</span><span class="token operator">:</span> <span class="token string">&quot;200000000&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12000000000&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>Field</th> <th style="text-align:center">Data Type</th> <th style="text-align:right">Description Information</th></tr></thead> <tbody><tr><td>chainId</td> <td style="text-align:center">int</td> <td style="text-align:right">Chain ID to initiate the call</td></tr> <tr><td>assetChainId</td> <td style="text-align:center">int</td> <td style="text-align:right">Asset-initiated chain id</td></tr> <tr><td>assetId</td> <td style="text-align:center">int</td> <td style="text-align:right">Asset ID</td></tr> <tr><td>balance.available</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">Available Balances</td></tr> <tr><td>balance.freeze</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">Freeze Balance</td></tr> <tr><td>balance.total</td> <td style="text-align:center">BigInteger</td> <td style="text-align:right">Total Asset Balance total = available+freeze</td></tr></tbody></table> <h2 id="description-of-the-event"><a href="#description-of-the-event" aria-hidden="true" class="header-anchor">#</a> Description of the event</h2> <blockquote><p>does not depend on any events</p></blockquote> <h2 id="agreement"><a href="#agreement" aria-hidden="true" class="header-anchor">#</a> Agreement</h2> <h3 id="_5-1-network-communication-protocol"><a href="#_5-1-network-communication-protocol" aria-hidden="true" class="header-anchor">#</a> 5.1 Network Communication Protocol</h3> <p>no</p> <h3 id="_5-2-trading-agreement"><a href="#_5-2-trading-agreement" aria-hidden="true" class="header-anchor">#</a> 5.2 Trading Agreement</h3> <p>no</p> <h2 id="module-configuration"><a href="#module-configuration" aria-hidden="true" class="header-anchor">#</a> Module Configuration</h2> <h3 id="_6-1-configuration-instructions"><a href="#_6-1-configuration-instructions" aria-hidden="true" class="header-anchor">#</a> 6.1 Configuration Instructions</h3> <h3 id="_6-2-module-dependencies"><a href="#_6-2-module-dependencies" aria-hidden="true" class="header-anchor">#</a> 6.2 Module Dependencies</h3> <ul><li>Kernel module
<ul><li><p>Module registration</p></li> <li><p>Module logout</p></li> <li><p>Module status escalation (heartbeat)</p></li> <li><p>Service interface data acquisition and timing update</p></li></ul></li> <li>Network module</li></ul> <h2 id="java-specific-design"><a href="#java-specific-design" aria-hidden="true" class="header-anchor">#</a> Java-specific design</h2> <blockquote><p>Core object class definition, storing data structures, ...</p></blockquote> <h2 id="supplementary-content"><a href="#supplementary-content" aria-hidden="true" class="header-anchor">#</a> Supplementary content</h2> <h3 id="references-literature"><a href="#references-literature" aria-hidden="true" class="header-anchor">#</a> References Literature</h3> <ul><li><a href="https://github.com/inoutcode/ethereum_book/blob/master/%E7%AC%AC%E4%B8%83%E7%AB%A0.asciidoc" target="_blank" rel="noopener noreferrer">Proficient in Ethereum - Chapter 7 Transaction<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/nuls-io/devsite/edit/master/docs/Docs/d_ledger.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/10/2019, 1:55:50 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Docs/d_network.html" class="prev">
          Network module design document
        </a></span> <span class="next"><a href="/Docs/d_chain_manager.html">
          Chain Management Module Design Document
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.a4a6b4ef.js" defer></script><script src="/assets/js/23.616d3c50.js" defer></script>
  </body>
</html>
